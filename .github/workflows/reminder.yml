on:
  schedule:
    # 5 am UTC is 10 pm PDT (summer) or 9 pm PST (winter)
    - cron: '0 5 * * *'
  workflow_dispatch:
    inputs:
      hello:
        description: 'hello lol'
        required: false
        type: boolean

jobs:
  test_schedule:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Check for Discord webhook URL
        run: |
          echo "discord webhook url is"
          echo $REMINDER_WEBHOOK
          echo "hello: $HELLO"
          pwd
          ls -al
          # gh issue comment 1 --body "hi @SheepTester. it's $(date)" && true
          # https://stackoverflow.com/a/9849524
          TZ=America/Los_Angeles
          SINCE=$(node random-javaProject-LmaoHaha/beginning-of-the-day.js)
          gh api -H "Accept: application/vnd.github+json" -H "X-GitHub-Api-Version: 2022-11-28" "/repos/NolanChai/Commit-Challenge-2024/commits?since=$SINCE" > commits.json
          node random-javaProject-LmaoHaha/read-commits.js
        env:
          REMINDER_WEBHOOK: ${{ secrets.REMINDER_WEBHOOK }}
          # https://docs.github.com/en/actions/using-workflows/using-github-cli-in-workflows
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          HELLO: ${{ inputs.hello }}
    permissions:
      # https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#permissions
      issues: write
